schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/data_ingestion.py
    deps:
    - path: src/data_ingestion.py
      hash: md5
      md5: 5c979d33f0a7059b706d80daad38095d
      size: 5912
    params:
      params.yaml:
        data_ingestion.test_size: 0.2
        mongodb.COLLECTION_NAME: Toxic_Comment_Data
        mongodb.CONNECTION_URL: 
          mongodb+srv://vaishnavibarolia_db_user:rDpnzMgseYw6bdnA@cluster0.b5qy2gy.mongodb.net/?appName=Cluster0
        mongodb.DB_NAME: Toxic_comment
        mongodb.batch_size: 10000
    outs:
    - path: data/raw
      hash: md5
      md5: 7a85057fc45deb6bdd197130b390ced5.dir
      size: 64279096
      nfiles: 2
  data_preprocessing:
    cmd: python src/data_preprocessing.py
    deps:
    - path: data/raw
      hash: md5
      md5: 7a85057fc45deb6bdd197130b390ced5.dir
      size: 64279096
      nfiles: 2
    - path: src/data_preprocessing.py
      hash: md5
      md5: 64179c59239a1fc9da650a56a11d0105
      size: 3084
    outs:
    - path: data/preprocess
      hash: md5
      md5: 6abb00dce13b14aa4753ab244530104b.dir
      size: 39664828
      nfiles: 2
  feature_engineering:
    cmd: python src/feature_engineering.py
    deps:
    - path: data/preprocess
      hash: md5
      md5: 6abb00dce13b14aa4753ab244530104b.dir
      size: 39664828
      nfiles: 2
    - path: src/feature_engineering.py
      hash: md5
      md5: 65eaec097384833bffaf52a2fed2b6ac
      size: 4582
    params:
      params.yaml:
        feature_engineering.max_len: 100
        feature_engineering.num_words: 5000
    outs:
    - path: artifacts/tokenizer.pkl
      hash: md5
      md5: 3a8b256d124607aeeb983ae84e364fc9
      size: 10167354
    - path: artifacts/x_test_pad.npy
      hash: md5
      md5: 84539a97a6fcd6974c8c70ce08e8e39a
      size: 12766128
    - path: artifacts/x_train_pad.npy
      hash: md5
      md5: ff0e271e8ea558d117b7139d20a1f1a2
      size: 51062528
    - path: artifacts/y_test.npy
      hash: md5
      md5: 950edf9ae9b649fba5fab1d7022d0e27
      size: 255448
    - path: artifacts/y_train.npy
      hash: md5
      md5: 5faa2f89e57da4c82455fce1a4b851fe
      size: 1021376
  model_training:
    cmd: python src/model_training.py
    deps:
    - path: artifacts/tokenizer.pkl
      hash: md5
      md5: 3a8b256d124607aeeb983ae84e364fc9
      size: 10167354
    - path: artifacts/x_test_pad.npy
      hash: md5
      md5: 84539a97a6fcd6974c8c70ce08e8e39a
      size: 12766128
    - path: artifacts/x_train_pad.npy
      hash: md5
      md5: ff0e271e8ea558d117b7139d20a1f1a2
      size: 51062528
    - path: artifacts/y_test.npy
      hash: md5
      md5: 950edf9ae9b649fba5fab1d7022d0e27
      size: 255448
    - path: artifacts/y_train.npy
      hash: md5
      md5: 5faa2f89e57da4c82455fce1a4b851fe
      size: 1021376
    - path: src/model_training.py
      hash: md5
      md5: a27650d08c513d2ab56f11c257ba972b
      size: 5447
    params:
      params.yaml:
        model_training.max_len: 100
        model_training.output_dim: 100
        model_training.vocab_size: 5000
    outs:
    - path: artifacts/cnn_model.h5
      hash: md5
      md5: 0147668d0ad6829ff5d6f8fabc0e4802
      size: 6907616
  model_evaluation:
    cmd: python src/model_evaluation.py
    deps:
    - path: artifacts/cnn_model.h5
      hash: md5
      md5: 0147668d0ad6829ff5d6f8fabc0e4802
      size: 6907616
    - path: artifacts/x_test_pad.npy
      hash: md5
      md5: 84539a97a6fcd6974c8c70ce08e8e39a
      size: 12766128
    - path: artifacts/x_train_pad.npy
      hash: md5
      md5: ff0e271e8ea558d117b7139d20a1f1a2
      size: 51062528
    - path: artifacts/y_test.npy
      hash: md5
      md5: 950edf9ae9b649fba5fab1d7022d0e27
      size: 255448
    - path: artifacts/y_train.npy
      hash: md5
      md5: 5faa2f89e57da4c82455fce1a4b851fe
      size: 1021376
    - path: src/model_evaluation.py
      hash: md5
      md5: e70c8e227c9b62ee54bc52f005a8e78b
      size: 5625
    outs:
    - path: artifacts/metrics.json
      hash: md5
      md5: b9a17dec36a3275339def2d132b09441
      size: 228
